<div class="row mt-5">
    <div class="col-12">
        <div class="mb-2">
            <app-header-page-title header-title="Movimentações Previstas" header-button-label="+ Nova Previsão"
                header-button-link="/mov-prevista/new">
            </app-header-page-title>
        </div>
        <p class="text-center">
            <span class="badge bg-dark">Período: {{pDataVencIni | date:'dd/MM/yyyy'}} a {{pDataVencFim | date:'dd/MM/yyyy'}}</span>
            <span *ngIf="pTipo!=null" class="badge bg-dark ms-2">Tipo: {{pTipo}}</span>
            <span *ngIf="pPrioridade!=null" class="badge bg-dark ms-2">Prioridade: {{pPrioridade}}</span>
            <span *ngIf="pCategoria!=null" class="badge bg-dark ms-2">Categoria: {{pCategoria}}</span>
            <span *ngIf="pItemMovimentacao!=null"  class="badge bg-dark ms-2">Item: {{pItemMovimentacao}}</span>
            <span *ngIf="pFormaPagamento!=null" class="badge bg-dark ms-2">Forma de Pagamento: {{pFormaPagamento}}</span>
        </p>
        <div *ngIf="movPrevistas.length > 0 else loading">
            <p-table [value]="movPrevistas" [scrollable]="true" scrollHeight="240px"
                styleClass="p-datatable-striped p-datatable-sm">
                <ng-template pTemplate="header">
                    <tr>
                        <th>Data de Vencimento</th>
                        <th>Item</th>
                        <th>Forma de Pagamento</th>
                        <th style="text-align: right;">Valor</th>
                        <th></th>
                        <th></th>
                    </tr>
                </ng-template>
                <ng-template pTemplate="body" let-movimentacao>
                    <tr>
                        <td>
                            <span *ngIf="movimentacao.tipoPrioridade=='A'">
                                <img class="logo" src="assets\icons\arrow_circle_up_black_24dp.svg" title="Prioridade: {{movimentacao.tipoPrioridadeDescricao}}" width="55" height="30">
                            </span>
                            <span *ngIf="movimentacao.tipoPrioridade=='M'">
                                <img class="logo" src="assets\icons\remove_circle_outline_black_24dp.svg" title="Prioridade: {{movimentacao.tipoPrioridadeDescricao}}" width="55" height="30">
                            </span>
                            <span *ngIf="movimentacao.tipoPrioridade=='B'">
                                <img class="logo" src="assets\icons\arrow_circle_down_black_24dp.svg" title="Prioridade: {{movimentacao.tipoPrioridadeDescricao}}" width="55" height="30">
                            </span>
                           {{movimentacao.dataVencimento | date:'dd/MM/yyyy'}}</td>
                        <td>
                            <strong>{{movimentacao.itemMovimentacao.descricao}}</strong>
                            <p>{{movimentacao.itemMovimentacao.categoria.descricao}}</p>
                        </td>
                        <td>
                            {{movimentacao.formaPagamento.descricao}}
                            <p *ngIf="movimentacao.parcela!='' ">Parcela: {{movimentacao.parcela}}</p>
                        </td>
                        <td class="text-end">
                            <strong [class.text-success]="movimentacao.itemMovimentacao.tipo=='R'"
                                    [class.text-danger]="movimentacao.itemMovimentacao.tipo=='D'">
                                    {{movimentacao.valor}}
                            </strong>
                        </td>
                        <td *ngIf="movimentacao.status=='A'">
                            <button class="btn btn-outline-primary btn-sm">
                                Quitar
                            </button>
                        </td>
                        <td *ngIf="movimentacao.status=='Q'" class="text-start">
                            <img class="logo" src="assets\icons\task_alt_black_24dp.svg" title="Status: {{movimentacao.statusDescricao}}" width="55" height="30">
                        </td>
                        <td style="text-align: center;">
                            <a *ngIf="movimentacao.status!='Q'" class="btn btn-outline-info btn-sm me-3">
                                Editar
                            </a>                            
                            <a *ngIf="movimentacao.status!='Q'" class="btn btn-outline-danger btn-sm">
                                Excluir
                            </a>
                        </td>
                    </tr>
                </ng-template>
            </p-table>
        </div>

        <ng-template #loading>
            <div style="text-align: center;">
                <p><strong>Movimentações Previstas não encontradas</strong></p>
            </div>
        </ng-template>

    </div>
</div>
<div class="row mt-2">
    <div class="col-3">
        <a class="btn btn-dark me-3" routerLink="/mov-prevista-consulta-param">Filtros</a>
    </div>
</div>
<!--
<app-modal-interrogative-form [modal-interrogative-id]="'modalDelete'" 
    [modal-interrogative-title]="'Sr. Usuário'"
    [modal-interrogative-message]="resourceDeleteMessage" 
    (modalInterrogativeResponse)="resourceEventDelete($event)">
</app-modal-interrogative-form>
-->