<div class="row mt-2">
    <div class="col-12">
        <div class="card mt-1">
            <div class="card-body">
                <div class="row">
                    <app-header-page-title header-title="Quitar Previsão" header-button-label=" Voltar >>"
                        [header-button-link]="['/mov-prevista', dataVencIni, dataVencFim]">
                    </app-header-page-title>
                    <hr>
                </div>
                <div class="row">
                    <div class="col-3">
                        <h6 class="text-muted mb-2">Movimentação Prevista</h6>
                        <h6>{{movimentacaoPrevista.itemMovimentacao.descricao}}</h6>
                    </div>
                    <div class="col-3">
                        <h6 class="card-title text-muted mb-2">Data de Vencimento</h6>
                        <h6 class="card-subtitle">{{movimentacaoPrevista.dataVencimento | date: 'dd/MM/yyyy'}}</h6>
                    </div>
                    <div class="col-3">
                        <h6 class="card-title text-muted mb-2">Forma de Pagamento</h6>
                        <h6 class="card-subtitle">{{movimentacaoPrevista.formaPagamento.descricao}}</h6>
                    </div>
                    <div class="col-3">
                        <h6 class="card-title text-muted mb-2">Valor</h6>
                        <h6 class="card-subtitle">{{movimentacaoPrevista.valor | currency}}</h6>
                    </div>
                </div>
            </div>
        </div>
        <div class="grid-table mt-1">
            <div class="thead">
                <div class="th" style="text-align:center">Data de Movimentação</div>
                <div class="th">Conta</div>
                <div class="th">Forma de Pagamento</div>
                <div class="th" style="text-align:center">Valor (R$)</div>
                <div class="th" style="text-align:center;">
                    <button class="btn btn-outline-light btn-sm" (click)="addRow()">
                        <strong>+ Novo</strong>
                    </button>
                </div>
            </div>
            <div class="tbody">
                <form class="tr" [formGroup]="fGroup"
                    *ngFor="let fGroup of arForms.controls; let i=index;" (submit)="salvar(fGroup)">
                    <div class="td" style="text-align:center">
                        <p-inputMask mask="99/99/9999" formControlName="dataMovimentacaoRealizada" placeholder="99/99/9999" slotChar="dd/mm/yyyy"></p-inputMask>
                    </div>
                    <div class="td">                        
                        <app-dropdown-conta [form-group]="fGroup" style="font-size: 14px;"></app-dropdown-conta>
                        <app-field-validation-form [form-control]="fGroup.get('idConta')"></app-field-validation-form>
                    </div>
                    <div class="td">
                        <app-dropdown-forma-pagamento [form-group]="fGroup" style="font-size: 14px;"></app-dropdown-forma-pagamento>
                        <app-field-validation-form [form-control]="fGroup.get('idFormaPagamento')"></app-field-validation-form>
                    </div>
                    <div class="td" style="text-align:center">
                        <p-inputNumber formControlName="valor" inputId="locale-german" mode="decimal" locale="de-DE" style="text-align: right;"
                            [minFractionDigits]="2">
                        </p-inputNumber>
                    </div>
                    <div class="td" style="text-align: center;">
                        form: {{fGroup.valid}}
                        <button type="submit" class="btn btn-outline-dark btn-sm" [disabled]="!fGroup.valid">
                              <img [src]="(fGroup.get('id').value==0) ? 'assets/icons/save_black_18dp.svg' : 'assets/icons/edit_note_black_18dp.svg'">
                         </button>
                         &nbsp;
                         <button *ngIf="fGroup.get('id').value > 0" class="btn btn-outline-dark btn-sm"
                               (click)="modalDeleteMessage(fGroup.get('id').value, fGroup.get('dataMovimentacaoRealizada').value)"
                                data-bs-toggle="modal"
                                data-bs-target="#modalDelete">
                            <img src="assets/icons/delete_black_18dp.svg">
                        </button>
                        <button *ngIf="fGroup.get('id').value == 0" class="btn btn-outline-dark btn-sm" (click)="deleteRow(i)">
                            <img src="assets/icons/delete_black_18dp.svg">
                        </button>
                    </div>
                </form>
            </div>
        </div>
    </div>
</div>
<app-modal-interrogative-form [modal-interrogative-id]="'modalDelete'" [modal-interrogative-title]="'Sr. Usuário'"
    [modal-interrogative-message]="deleteMessage" (modalInterrogativeResponse)="eventDelete($event)">
</app-modal-interrogative-form>
<!--//DIALOG DE ERROS
<p-dialog [modal]="true" [(visible)]="displayError" [style]="{width: '50vw'}">
    <ng-template pTemplate="header">
        <div style="text-align: left;">
            <img class="logo" src="assets\icons\report_problem_black_24dp.svg" width="55" height="30">
            <strong>Erros de Validação</strong>
        </div>
    </ng-template>

    <ul>
        <li *ngFor="let error of arvalidationErrors" class="text-danger">
            <strong>{{ error.errors }}</strong>
        </li>
    </ul>

    <ng-template pTemplate="footer">
        <p-button icon="pi pi-check" (click)="clearValidations()" label="Ok" styleClass="p-button-text"></p-button>
    </ng-template>
</p-dialog>
-->