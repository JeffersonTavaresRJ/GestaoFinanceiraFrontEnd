<div class="row">
  <div class="col-3">
    <h3>Fechamento Mensal</h3>
  </div>
  <div class="col-3">
    <p-dropdown [options]="arFechamentosMensais" 
                optionLabel="mesAno" 
                optionValue="dataReferencia" 
                [(ngModel)]="selectedMesAno"
                [virtualScroll]="true" 
                [itemSize]="3"
                [showClear]="false" 
                [filter]="false"
                (onChange)="onChange(0)"
                emptyMessage="Não encontrado"
                autoDisplayFirst="true">
    </p-dropdown>
  </div>
  <div class="col-3">
    <div *ngIf="status=='A'" class="alert alert-success" role="alert">
      <strong>{{descricaoStatus}}</strong>
    </div>
    <div *ngIf="status=='F'" class="alert alert-danger" role="alert">
      <strong>{{descricaoStatus}}</strong>
    </div>
  </div>
</div>
<hr>
<mat-vertical-stepper #stepper>
  <mat-step [stepControl]="firstFormGroup">
    <form [formGroup]="firstFormGroup">
      <ng-template matStepLabel>Previsão Consolidada</ng-template>
      <div class="grid-table">
        <div class="thead">
            <div class="th"></div>
            <div class="th"style="text-align: right;">Em Aberto</div>
            <div class="th"style="text-align: right;">Quitado</div>
            <div class="th"></div>
        </div>
      </div>
      <div class="grid-table" style="border: 1px solid black">
          <div class="tbody">
            <form class="tr" [formGroup]="fGroupPrev" *ngFor="let fGroupPrev of arFormsPrev.controls; let i=index;">
              <div class="td">{{fGroupPrev.get('tipo').value}}</div>
              <div class="td" style="text-align: right;">{{fGroupPrev.get('valorEmAberto').value | currency }}</div>
              <div class="td" style="text-align: right;">{{fGroupPrev.get('valorQuitado').value  | currency}}</div>
              <div class="td" style="text-align: center;">
                <input *ngIf="status=='A'" class="form-check-input" type="checkbox" formControlName="isChecked" required>
              </div>
            </form> 
          </div>
      </div>
      <div class="mt-2">
        <button id="buttonFirst" type="button" class="btn btn-dark" (mousemove)="firstNext()" matStepperNext>Próximo</button>
      </div>
    </form>
  </mat-step>
  <mat-step [stepControl]="secondFormGroup">
    <form [formGroup]="secondFormGroup">
      <ng-template matStepLabel>Últimos Lançamentos</ng-template>
      <div class="grid-table">
        <div class="thead">
            <div class="th">Conta</div>
            <div class="th" style="text-align: center;">Último Lançamento</div>
            <div class="th" style="text-align: right;">Saldo Atual</div>
            <div class="th"></div>
        </div>
      </div>
      <div class="scroll">
        <div class="grid-table">
            <div class="tbody">
              <form class="tr" [formGroup]="fGroupReal" *ngFor="let fGroupReal of arFormsReal.controls; let i=index;">
                <div class="td">{{fGroupReal.get('conta').value}}</div>
                <div class="td" style="text-align: center;">{{fGroupReal.get('dataSaldo').value | date:'dd/MM/yyyy' }}</div>
                <div class="td" style="text-align: right;">{{fGroupReal.get('valor').value | currency}}</div>
                <div class="td" style="text-align: center;">
                  <input *ngIf="status=='A'" class="form-check-input" type="checkbox" formControlName="isChecked" required>
                </div>
              </form> 
            </div>
        </div>
      </div>
      <div class="mt-2">
        <button id="buttonSecond"  type="button" class="btn btn-dark" matStepperPrevious style="margin-right: 10px;">Voltar</button>
        <button type="button" class="btn btn-dark" (mousemove)="secondNext()"  matStepperNext>Próximo</button>
      </div>
    </form>
  </mat-step>
  <mat-step>
    <ng-template matStepLabel>{{labelButton}} sistema</ng-template>
    <div class="mt-2">
      <button type="button" class="btn btn-dark" style="margin-right: 10px;" (click)="execute()">{{labelButton}}</button>
      <button *ngIf="status=='A'" type="button" class="btn btn-dark" (click)="setValueChecks('');stepper.reset();">Reset</button>
    </div>
  </mat-step>
</mat-vertical-stepper>